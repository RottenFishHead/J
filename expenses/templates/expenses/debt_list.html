{% extends 'expenses/base.html' %}
{% load humanize %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Debt List</h1>
    <a href="{% url 'expenses:debt_create' %}" class="btn btn-primary">+ Add Debt</a>
</div>

<div class="alert alert-info mb-3">
    <div class="row">
        <div class="col-md-4">
            <strong>Total Owed:</strong> ${{ total_owed|floatformat:2|intcomma }}
        </div>
        <div class="col-md-4">
            <strong>Total Paid:</strong> ${{ total_paid|floatformat:2|intcomma }}
        </div>
        <div class="col-md-4">
            <strong>Remaining:</strong> <span class="text-danger fw-bold">${{ total_remaining|floatformat:2|intcomma }}</span>
        </div>
    </div>
</div>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Debtor Name</th>
            <th>Description</th>
            <th>Amount Owed</th>
            <th>Total Amount Paid</th>
            <th>Details</th>
        </tr>
    </thead>
    <tbody>
        {% for debt in debts %}
        <tr>
            <td><a href="{% url 'expenses:debt_details' debt.id %}">{{ debt.name }}</a></td>
            <td>{{ debt.description }}</td>
            <td>${{ debt.owed }}</td>
            <td>${{ debt.total_amount_paid }}</td>
            <td><a href="{% url 'expenses:debt_details' debt.id %}">Details</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}